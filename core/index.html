
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Documentation for labtech">
      
      
      
      
        <link rel="prev" href="../cookbook/">
      
      
        <link rel="next" href="../runners/">
      
      
      <link rel="icon" href="../images/icon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.12">
    
    
      
        <title>Labs and Tasks - labtech</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.2afb09e1.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../stylesheets/extra.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  <meta name="google-site-verification" content="vh6b0j6iPvwU3b9udYxcZrs_R0D-m6NRkRzqFnTiP-A" />
  

  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#labtech.Lab" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="labtech" class="md-header__button md-logo" aria-label="labtech" data-md-component="logo">
      
  <img src="../images/icon.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            labtech
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Labs and Tasks
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/ben-denham/labtech/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="labtech" class="md-nav__button md-logo" aria-label="labtech" data-md-component="logo">
      
  <img src="../images/icon.svg" alt="logo">

    </a>
    labtech
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ben-denham/labtech/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    README
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorial/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tutorial
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cookbook/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Cookbook
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Labs and Tasks
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Labs and Tasks
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#labtech.Lab" class="md-nav__link">
    <span class="md-ellipsis">
      Lab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.run_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      run_tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.run_task" class="md-nav__link">
    <span class="md-ellipsis">
      run_task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.cached_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      cached_tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.is_cached" class="md-nav__link">
    <span class="md-ellipsis">
      is_cached
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.uncache_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      uncache_tasks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.task" class="md-nav__link">
    <span class="md-ellipsis">
      task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.types.Task" class="md-nav__link">
    <span class="md-ellipsis">
      Task
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.result_meta" class="md-nav__link">
    <span class="md-ellipsis">
      result_meta
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.code_version" class="md-nav__link">
    <span class="md-ellipsis">
      code_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.current_code_version" class="md-nav__link">
    <span class="md-ellipsis">
      current_code_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.cache_key" class="md-nav__link">
    <span class="md-ellipsis">
      cache_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.result" class="md-nav__link">
    <span class="md-ellipsis">
      result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.set_context" class="md-nav__link">
    <span class="md-ellipsis">
      set_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.runner_options" class="md-nav__link">
    <span class="md-ellipsis">
      runner_options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.filter_context" class="md-nav__link">
    <span class="md-ellipsis">
      filter_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.types.ResultT" class="md-nav__link">
    <span class="md-ellipsis">
      labtech.types.ResultT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.types.ResultMeta" class="md-nav__link">
    <span class="md-ellipsis">
      ResultMeta
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ResultMeta">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#labtech.types.ResultMeta.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.ResultMeta.duration" class="md-nav__link">
    <span class="md-ellipsis">
      duration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.types.LabContext" class="md-nav__link">
    <span class="md-ellipsis">
      labtech.types.LabContext
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.is_task_type" class="md-nav__link">
    <span class="md-ellipsis">
      is_task_type
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.is_task" class="md-nav__link">
    <span class="md-ellipsis">
      is_task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.logger" class="md-nav__link">
    <span class="md-ellipsis">
      labtech.logger
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../runners/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Task Runner Backends
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../distributed/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Multi-Machine Clusters
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../diagram/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Diagramming
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../caching/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Caches and Storage
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#labtech.Lab" class="md-nav__link">
    <span class="md-ellipsis">
      Lab
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Lab">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.run_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      run_tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.run_task" class="md-nav__link">
    <span class="md-ellipsis">
      run_task
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.cached_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      cached_tasks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.is_cached" class="md-nav__link">
    <span class="md-ellipsis">
      is_cached
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.Lab.uncache_tasks" class="md-nav__link">
    <span class="md-ellipsis">
      uncache_tasks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.task" class="md-nav__link">
    <span class="md-ellipsis">
      task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.types.Task" class="md-nav__link">
    <span class="md-ellipsis">
      Task
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Task">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.context" class="md-nav__link">
    <span class="md-ellipsis">
      context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.result_meta" class="md-nav__link">
    <span class="md-ellipsis">
      result_meta
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.code_version" class="md-nav__link">
    <span class="md-ellipsis">
      code_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.current_code_version" class="md-nav__link">
    <span class="md-ellipsis">
      current_code_version
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.cache_key" class="md-nav__link">
    <span class="md-ellipsis">
      cache_key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.result" class="md-nav__link">
    <span class="md-ellipsis">
      result
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.set_context" class="md-nav__link">
    <span class="md-ellipsis">
      set_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.runner_options" class="md-nav__link">
    <span class="md-ellipsis">
      runner_options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.filter_context" class="md-nav__link">
    <span class="md-ellipsis">
      filter_context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.Task.run" class="md-nav__link">
    <span class="md-ellipsis">
      run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.types.ResultT" class="md-nav__link">
    <span class="md-ellipsis">
      labtech.types.ResultT
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.types.ResultMeta" class="md-nav__link">
    <span class="md-ellipsis">
      ResultMeta
    </span>
  </a>
  
    <nav class="md-nav" aria-label="ResultMeta">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#labtech.types.ResultMeta.start" class="md-nav__link">
    <span class="md-ellipsis">
      start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#labtech.types.ResultMeta.duration" class="md-nav__link">
    <span class="md-ellipsis">
      duration
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.types.LabContext" class="md-nav__link">
    <span class="md-ellipsis">
      labtech.types.LabContext
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.is_task_type" class="md-nav__link">
    <span class="md-ellipsis">
      is_task_type
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.is_task" class="md-nav__link">
    <span class="md-ellipsis">
      is_task
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#labtech.logger" class="md-nav__link">
    <span class="md-ellipsis">
      labtech.logger
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Labs and Tasks</h1>

<p>In this document you'll find API reference documentation for
configuring <a class="autorefs autorefs-internal" title="labtech.Lab" href="#labtech.Lab">Labs</a> and <a class="autorefs autorefs-internal" title="labtech.task(*args, code_version: Optional[str] = None, cache: Union[CacheDefault, None, Cache] = CACHE_DEFAULT, max_parallel: Optional[int] = None, mlflow_run: bool = False)" href="#labtech.task">tasks</a>. For a
tutorial-style explanation, see the <a href="../">README</a>.</p>


<div class="doc doc-object doc-class">



<h2 id="labtech.Lab" class="doc doc-heading">
            <code>labtech.Lab</code>


</h2>


    <div class="doc doc-contents first">


        <p>Primary interface for configuring, running, and getting results of tasks.</p>
<p>A Lab can be used to run tasks with <a class="autorefs autorefs-internal" title="run_tasks(tasks: Sequence[TaskT], *, bust_cache: bool = False, disable_progress: bool = False, disable_top: bool = False, top_format: str = '$name $status since $start_time CPU: $cpu MEM: $rss', top_sort: str = 'start_time', top_n: int = 10) -> dict[TaskT, Any]" href="#labtech.Lab.run_tasks"><code>run_tasks()</code></a>.</p>
<p>Previously cached tasks can be retrieved with
<a class="autorefs autorefs-internal" title="cached_tasks(task_types: Sequence[Type[TaskT]]) -> Sequence[TaskT]" href="#labtech.Lab.cached_tasks"><code>cached_tasks()</code></a>, and can then have
their results loaded with <a class="autorefs autorefs-internal" title="run_tasks(tasks: Sequence[TaskT], *, bust_cache: bool = False, disable_progress: bool = False, disable_top: bool = False, top_format: str = '$name $status since $start_time CPU: $cpu MEM: $rss', top_sort: str = 'start_time', top_n: int = 10) -> dict[TaskT, Any]" href="#labtech.Lab.run_tasks"><code>run_tasks()</code></a>
or be removed from the cache storage with
<a class="autorefs autorefs-internal" title="uncache_tasks(tasks: Sequence[Task])" href="#labtech.Lab.uncache_tasks"><code>uncache_tasks()</code></a>.</p>







              <details class="quote">
                <summary>Source code in <code>labtech/lab.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">286</span>
<span class="normal">287</span>
<span class="normal">288</span>
<span class="normal">289</span>
<span class="normal">290</span>
<span class="normal">291</span>
<span class="normal">292</span>
<span class="normal">293</span>
<span class="normal">294</span>
<span class="normal">295</span>
<span class="normal">296</span>
<span class="normal">297</span>
<span class="normal">298</span>
<span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span>
<span class="normal">405</span>
<span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span>
<span class="normal">495</span>
<span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span>
<span class="normal">509</span>
<span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span>
<span class="normal">534</span>
<span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span>
<span class="normal">540</span>
<span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Lab</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Primary interface for configuring, running, and getting results of tasks.</span>

<span class="sd">    A Lab can be used to run tasks with [`run_tasks()`][labtech.Lab.run_tasks].</span>

<span class="sd">    Previously cached tasks can be retrieved with</span>
<span class="sd">    [`cached_tasks()`][labtech.Lab.cached_tasks], and can then have</span>
<span class="sd">    their results loaded with [`run_tasks()`][labtech.Lab.run_tasks]</span>
<span class="sd">    or be removed from the cache storage with</span>
<span class="sd">    [`uncache_tasks()`][labtech.Lab.uncache_tasks].</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
                 <span class="n">storage</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Storage</span><span class="p">],</span>
                 <span class="n">continue_on_failure</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
                 <span class="n">max_workers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">notebook</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LabContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
                 <span class="n">runner_backend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">RunnerBackend</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Args:</span>
<span class="sd">            storage: Where task results should be cached to. A string or</span>
<span class="sd">                [`Path`](https://docs.python.org/3/library/pathlib.html#pathlib.Path)</span>
<span class="sd">                will be interpreted as the path to a local directory, `None`</span>
<span class="sd">                will result in no caching. Any [Storage][labtech.types.Storage]</span>
<span class="sd">                instance may also be specified.</span>
<span class="sd">            continue_on_failure: If `True`, exceptions raised by tasks will be</span>
<span class="sd">                logged, but execution of other tasks will continue.</span>
<span class="sd">            max_workers: The maximum number of parallel worker processes for</span>
<span class="sd">                running tasks. A sensible default will be determined by the</span>
<span class="sd">                runner_backend (`&#39;fork&#39;` and `&#39;spawn&#39;` use the number of</span>
<span class="sd">                processors on the machine given by `os.cpu_count()`, while</span>
<span class="sd">                `&#39;thread&#39;` uses `os.cpu_count() + 4`).</span>
<span class="sd">            notebook: Determines whether to use notebook-friendly graphical</span>
<span class="sd">                progress bars. When set to `None` (the default), labtech will</span>
<span class="sd">                detect whether the code is being run from an IPython notebook.</span>
<span class="sd">            context: A dictionary of additional variables to make available to</span>
<span class="sd">                tasks. The context will not be cached, so the values should not</span>
<span class="sd">                affect results (e.g. parallelism factors) or should be kept</span>
<span class="sd">                constant between runs (e.g. datasets).</span>
<span class="sd">            runner_backend: Controls how tasks are run in parallel. It can</span>
<span class="sd">                optionally be set to one of the following options:</span>

<span class="sd">                * `&#39;fork&#39;`: Uses the</span>
<span class="sd">                  [`ForkRunnerBackend`][labtech.runners.ForkRunnerBackend]</span>
<span class="sd">                  to run each task in a forked subprocess. Memory use</span>
<span class="sd">                  is reduced by sharing the context and dependency task</span>
<span class="sd">                  results between tasks with memory inherited from the</span>
<span class="sd">                  parent process. The default on platforms that support</span>
<span class="sd">                  forked Python subprocesses when `max_workers &gt; 1`: Linux</span>
<span class="sd">                  and other POSIX systems, but not macOS or Windows.</span>
<span class="sd">                * `&#39;spawn&#39;`: Uses the</span>
<span class="sd">                  [`SpawnRunnerBackend`][labtech.runners.SpawnRunnerBackend]</span>
<span class="sd">                  to run each task in a spawned subprocess. The</span>
<span class="sd">                  context and dependency task results are</span>
<span class="sd">                  copied/duplicated into the memory of each</span>
<span class="sd">                  subprocess. The default on macOS and Windows when</span>
<span class="sd">                  `max_workers &gt; 1`.</span>
<span class="sd">                * `&#39;thread&#39;`: Uses the</span>
<span class="sd">                  [`ThreadRunnerBackend`][labtech.runners.ThreadRunnerBackend]</span>
<span class="sd">                  to run each task in a separate Python thread. Because</span>
<span class="sd">                  [Python threads do not execute in parallel](https://docs.python.org/3/glossary.html#term-global-interpreter-lock),</span>
<span class="sd">                  this runner is best suited for running tasks that are</span>
<span class="sd">                  constrained by non-blocking IO operations (e.g. web</span>
<span class="sd">                  requests), or for running a single worker with live task</span>
<span class="sd">                  monitoring. Memory use is reduced by sharing the same</span>
<span class="sd">                  in-memory context and dependency task results across</span>
<span class="sd">                  threads. The default when `max_workers = 1`.</span>
<span class="sd">                * `&#39;serial&#39;`: Uses the</span>
<span class="sd">                  [`SerialRunnerBackend`][labtech.runners.SerialRunnerBackend]</span>
<span class="sd">                  to run each task serially in the main process and thread.</span>
<span class="sd">                  The task monitor will only be updated in between tasks. Mainly</span>
<span class="sd">                  useful when troubleshooting issues running tasks on different</span>
<span class="sd">                  threads and processes.</span>
<span class="sd">                * Any instance of a</span>
<span class="sd">                  [`RunnerBackend`][labtech.types.RunnerBackend],</span>
<span class="sd">                  allowing for custom task management implementations.</span>

<span class="sd">                For details on the differences between `&#39;fork&#39;` and</span>
<span class="sd">                `&#39;spawn&#39;` backends, see [the Python documentation on</span>
<span class="sd">                `multiprocessing` start methods](https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods).</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
            <span class="n">storage</span> <span class="o">=</span> <span class="n">LocalStorage</span><span class="p">(</span><span class="n">storage</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">storage</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">storage</span> <span class="o">=</span> <span class="n">NullStorage</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span> <span class="o">=</span> <span class="n">storage</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">continue_on_failure</span> <span class="o">=</span> <span class="n">continue_on_failure</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">max_workers</span> <span class="o">=</span> <span class="n">max_workers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">notebook</span> <span class="o">=</span> <span class="n">is_ipython</span><span class="p">()</span> <span class="k">if</span> <span class="n">notebook</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">notebook</span>
        <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">context</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span>
        <span class="k">if</span> <span class="n">runner_backend</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">start_methods</span> <span class="o">=</span> <span class="n">get_all_start_methods</span><span class="p">()</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_workers</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">ThreadRunnerBackend</span><span class="p">()</span>
            <span class="k">elif</span> <span class="s1">&#39;fork&#39;</span> <span class="ow">in</span> <span class="n">start_methods</span><span class="p">:</span>
                <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">ForkRunnerBackend</span><span class="p">()</span>
            <span class="k">elif</span> <span class="s1">&#39;spawn&#39;</span> <span class="ow">in</span> <span class="n">start_methods</span><span class="p">:</span>
                <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">SpawnRunnerBackend</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LabError</span><span class="p">((</span><span class="s1">&#39;Default </span><span class="se">\&#39;</span><span class="s1">fork</span><span class="se">\&#39;</span><span class="s1"> and </span><span class="se">\&#39;</span><span class="s1">spawn</span><span class="se">\&#39;</span><span class="s1"> multiprocessing runner &#39;</span>
                                <span class="s1">&#39;backends are not supported on your system.&#39;</span>
                                <span class="s1">&#39;Please specify a system-compatible runner_backend.&#39;</span><span class="p">))</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">runner_backend</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">runner_backend</span> <span class="o">==</span> <span class="s1">&#39;fork&#39;</span><span class="p">:</span>
                <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">ForkRunnerBackend</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">runner_backend</span> <span class="o">==</span> <span class="s1">&#39;spawn&#39;</span><span class="p">:</span>
                <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">SpawnRunnerBackend</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">runner_backend</span> <span class="o">==</span> <span class="s1">&#39;serial&#39;</span><span class="p">:</span>
                <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">SerialRunnerBackend</span><span class="p">()</span>
            <span class="k">elif</span> <span class="n">runner_backend</span> <span class="o">==</span> <span class="s1">&#39;thread&#39;</span><span class="p">:</span>
                <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">ThreadRunnerBackend</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LabError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unrecognised runner_backend: </span><span class="si">{</span><span class="n">runner_backend</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">runner_backend</span> <span class="o">=</span> <span class="n">runner_backend</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TaskT</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span>
                  <span class="n">bust_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                  <span class="n">disable_progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                  <span class="n">disable_top</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
                  <span class="n">top_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;$name $status since $start_time CPU: $cpu MEM: $rss&#39;</span><span class="p">,</span>
                  <span class="n">top_sort</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;start_time&#39;</span><span class="p">,</span>
                  <span class="n">top_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">TaskT</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run the given tasks with as much process parallelism as possible.</span>
<span class="sd">        Loads task results from the cache storage where possible and</span>
<span class="sd">        caches results of executed tasks.</span>

<span class="sd">        Any attribute of a task that is itself a task object is</span>
<span class="sd">        considered a &quot;nested task&quot;, and will be executed or loaded so</span>
<span class="sd">        that it&#39;s result is made available to its parent task. If the</span>
<span class="sd">        same task is nested inside multiple task objects, it will only</span>
<span class="sd">        be executed/loaded once.</span>

<span class="sd">        As well as returning the results, each task&#39;s result will be</span>
<span class="sd">        assigned to a `result` attribute on the task itself.</span>

<span class="sd">        Args:</span>
<span class="sd">            tasks: The tasks to execute. Each should be an instance of a class</span>
<span class="sd">                decorated with [`labtech.task`][labtech.task].</span>
<span class="sd">            bust_cache: If `True`, no task results will be loaded from the</span>
<span class="sd">                cache storage; all tasks will be re-executed.</span>
<span class="sd">            disable_progress: If `True`, do not display a tqdm progress bar</span>
<span class="sd">                tracking task execution.</span>
<span class="sd">            disable_top: If `True`, do not display the list of top active tasks.</span>
<span class="sd">            top_format: Format for each top active task. Follows the format</span>
<span class="sd">                rules for</span>
<span class="sd">                [template strings](https://docs.python.org/3/library/string.html#template-strings)</span>
<span class="sd">                and may include any of the following attributes for</span>
<span class="sd">                substitution:</span>

<span class="sd">                * `name`: The task&#39;s name displayed in logs.</span>
<span class="sd">                * `pid`: The task&#39;s primary process id.</span>
<span class="sd">                * `status`: Whether the task is being run or loaded from cache.</span>
<span class="sd">                * `start_time`: The time the task&#39;s primary process started.</span>
<span class="sd">                * `children`: The number of child tasks of the task&#39;s primary</span>
<span class="sd">                  process.</span>
<span class="sd">                * `threads`: The number of active CPU threads for the task</span>
<span class="sd">                  (including across any child processes).</span>
<span class="sd">                * `cpu`: The CPU percentage (1 core = 100%) being used by the</span>
<span class="sd">                  task (including across any child processes).</span>
<span class="sd">                * `rss`: The resident set size (RSS) memory percentage being</span>
<span class="sd">                  used by the task (including across any child processes). RSS</span>
<span class="sd">                  is the primary measure of memory usage.</span>
<span class="sd">                * `vms`: The virtual memory size (VMS) percentage being used by</span>
<span class="sd">                  the task (including across any child processes).</span>
<span class="sd">            top_sort: Sort order for the top active tasks. Can be any of the</span>
<span class="sd">                attributes available for use in `top_format`. If the string is</span>
<span class="sd">                preceded by a `-`, the sort order will be reversed. Defaults to</span>
<span class="sd">                showing oldest tasks first.</span>
<span class="sd">            top_n: The maximum number of top active tasks to display.</span>

<span class="sd">        Returns:</span>
<span class="sd">            A dictionary mapping each of the provided tasks to its</span>
<span class="sd">                corresponding result.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">check_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">code_version</span> <span class="o">!=</span> <span class="n">task</span><span class="o">.</span><span class="n">current_code_version</span><span class="p">:</span>
                <span class="k">raise</span> <span class="n">LabError</span><span class="p">(</span>
                    <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;`</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">task</span><span class="p">)</span><span class="si">}</span><span class="s1">` cannot be run, as it has code_version=</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">code_version</span><span class="si">!r}</span><span class="s1"> &#39;</span>
                     <span class="sa">f</span><span class="s1">&#39;while the current implementation of </span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> has &#39;</span>
                     <span class="sa">f</span><span class="s1">&#39;code_version=</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">current_code_version</span><span class="si">!r}</span><span class="s1">. You should construct new &#39;</span>
                     <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> tasks to run instead of running tasks loaded from cache.&#39;</span><span class="p">)</span>
                <span class="p">)</span>


        <span class="n">coordinator</span> <span class="o">=</span> <span class="n">TaskCoordinator</span><span class="p">(</span>
            <span class="bp">self</span><span class="p">,</span>
            <span class="n">bust_cache</span><span class="o">=</span><span class="n">bust_cache</span><span class="p">,</span>
            <span class="n">disable_progress</span><span class="o">=</span><span class="n">disable_progress</span><span class="p">,</span>
            <span class="n">disable_top</span><span class="o">=</span><span class="n">disable_top</span><span class="p">,</span>
            <span class="n">top_format</span><span class="o">=</span><span class="n">top_format</span><span class="p">,</span>
            <span class="n">top_sort</span><span class="o">=</span><span class="n">top_sort</span><span class="p">,</span>
            <span class="n">top_n</span><span class="o">=</span><span class="n">top_n</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">results</span> <span class="o">=</span> <span class="n">coordinator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

        <span class="n">failed_tasks</span> <span class="o">=</span> <span class="p">{</span><span class="n">task</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span> <span class="k">if</span> <span class="n">task</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">results</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">failed_tasks</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LabError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Failed to complete </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">failed_tasks</span><span class="p">)</span><span class="si">}</span><span class="s1"> submitted task(s)&#39;</span><span class="p">)</span>

        <span class="c1"># Return results in the same order as tasks</span>
        <span class="k">return</span> <span class="p">{</span><span class="n">task</span><span class="p">:</span> <span class="n">results</span><span class="p">[</span><span class="n">task</span><span class="p">]</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">}</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">[</span><span class="n">ResultT</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResultT</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Run a single task and return its result. Supports the same keyword</span>
<span class="sd">        arguments as `run_tasks`.</span>

<span class="sd">        NOTE: If you have many tasks to run, you should use</span>
<span class="sd">        `run_tasks` instead to parallelise their execution.</span>

<span class="sd">        Returns:</span>
<span class="sd">            The result of the given task.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_tasks</span><span class="p">([</span><span class="n">task</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">results</span><span class="p">[</span><span class="n">task</span><span class="p">]</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">cached_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_types</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">TaskT</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TaskT</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns all task instances present in the Lab&#39;s cache storage for</span>
<span class="sd">        the given `task_types`, each of which should be a task class</span>
<span class="sd">        decorated with [`labtech.task`][labtech.task].</span>

<span class="sd">        Does not load task results from the cache storage, but they</span>
<span class="sd">        can be loaded by calling</span>
<span class="sd">        [`run_tasks()`][labtech.Lab.run_tasks] with the returned task</span>
<span class="sd">        instances.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">check_task_types</span><span class="p">(</span><span class="n">task_types</span><span class="p">)</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="o">.</span><span class="n">find_keys</span><span class="p">()</span>
        <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="k">for</span> <span class="n">task_type</span> <span class="ow">in</span> <span class="n">task_types</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">task</span> <span class="o">=</span> <span class="n">task_type</span><span class="o">.</span><span class="n">_lt</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">load_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">,</span> <span class="n">task_type</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
                <span class="k">except</span> <span class="n">TaskNotFound</span><span class="p">:</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
                    <span class="k">break</span>
        <span class="k">return</span> <span class="n">tasks</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">is_cached</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Checks if a result is present for given task in the Lab&#39;s cache</span>
<span class="sd">        storage.&quot;&quot;&quot;</span>
        <span class="n">check_tasks</span><span class="p">([</span><span class="n">task</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">task</span><span class="o">.</span><span class="n">_lt</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">is_cached</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">uncache_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes cached results for the given tasks from the Lab&#39;s cache</span>
<span class="sd">        storage.&quot;&quot;&quot;</span>
        <span class="n">check_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_cached</span><span class="p">(</span><span class="n">task</span><span class="p">):</span>
                <span class="n">task</span><span class="o">.</span><span class="n">_lt</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="labtech.Lab.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="p">,</span> <span class="n">storage</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Storage</span><span class="p">],</span> <span class="n">continue_on_failure</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="n">max_workers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">notebook</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LabContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">runner_backend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">RunnerBackend</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">



<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>storage</code></b>
              (<code><span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="pathlib.Path">Path</span>, None, <a class="autorefs autorefs-internal" title="labtech.storage.Storage (labtech.types.Storage)" href="../caching/#labtech.storage.Storage">Storage</a>]</code>)
          –
          <div class="doc-md-description">
            <p>Where task results should be cached to. A string or
<a href="https://docs.python.org/3/library/pathlib.html#pathlib.Path"><code>Path</code></a>
will be interpreted as the path to a local directory, <code>None</code>
will result in no caching. Any <a class="autorefs autorefs-internal" title="labtech.storage.Storage" href="../caching/#labtech.storage.Storage">Storage</a>
instance may also be specified.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>continue_on_failure</code></b>
              (<code><span title="bool">bool</span></code>, default:
                  <code>True</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>True</code>, exceptions raised by tasks will be
logged, but execution of other tasks will continue.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>max_workers</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The maximum number of parallel worker processes for
running tasks. A sensible default will be determined by the
runner_backend (<code>'fork'</code> and <code>'spawn'</code> use the number of
processors on the machine given by <code>os.cpu_count()</code>, while
<code>'thread'</code> uses <code>os.cpu_count() + 4</code>).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>notebook</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="bool">bool</span>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Determines whether to use notebook-friendly graphical
progress bars. When set to <code>None</code> (the default), labtech will
detect whether the code is being run from an IPython notebook.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>context</code></b>
              (<code><span title="typing.Optional">Optional</span>[<a class="autorefs autorefs-internal" title="labtech.types.LabContext = dict[str, Any]

  
      module-attribute
   (labtech.types.LabContext)" href="#labtech.types.LabContext">LabContext</a>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>A dictionary of additional variables to make available to
tasks. The context will not be cached, so the values should not
affect results (e.g. parallelism factors) or should be kept
constant between runs (e.g. datasets).</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>runner_backend</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="str">str</span> | <a class="autorefs autorefs-internal" title="labtech.types.RunnerBackend" href="../runners/#labtech.types.RunnerBackend">RunnerBackend</a>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Controls how tasks are run in parallel. It can
optionally be set to one of the following options:</p>
<ul>
<li><code>'fork'</code>: Uses the
  <a class="autorefs autorefs-internal" title="labtech.runners.ForkRunnerBackend" href="../runners/#labtech.runners.ForkRunnerBackend"><code>ForkRunnerBackend</code></a>
  to run each task in a forked subprocess. Memory use
  is reduced by sharing the context and dependency task
  results between tasks with memory inherited from the
  parent process. The default on platforms that support
  forked Python subprocesses when <code>max_workers &gt; 1</code>: Linux
  and other POSIX systems, but not macOS or Windows.</li>
<li><code>'spawn'</code>: Uses the
  <a class="autorefs autorefs-internal" title="labtech.runners.SpawnRunnerBackend" href="../runners/#labtech.runners.SpawnRunnerBackend"><code>SpawnRunnerBackend</code></a>
  to run each task in a spawned subprocess. The
  context and dependency task results are
  copied/duplicated into the memory of each
  subprocess. The default on macOS and Windows when
  <code>max_workers &gt; 1</code>.</li>
<li><code>'thread'</code>: Uses the
  <a class="autorefs autorefs-internal" title="labtech.runners.ThreadRunnerBackend" href="../runners/#labtech.runners.ThreadRunnerBackend"><code>ThreadRunnerBackend</code></a>
  to run each task in a separate Python thread. Because
  <a href="https://docs.python.org/3/glossary.html#term-global-interpreter-lock">Python threads do not execute in parallel</a>,
  this runner is best suited for running tasks that are
  constrained by non-blocking IO operations (e.g. web
  requests), or for running a single worker with live task
  monitoring. Memory use is reduced by sharing the same
  in-memory context and dependency task results across
  threads. The default when <code>max_workers = 1</code>.</li>
<li><code>'serial'</code>: Uses the
  <a class="autorefs autorefs-internal" title="labtech.runners.SerialRunnerBackend" href="../runners/#labtech.runners.SerialRunnerBackend"><code>SerialRunnerBackend</code></a>
  to run each task serially in the main process and thread.
  The task monitor will only be updated in between tasks. Mainly
  useful when troubleshooting issues running tasks on different
  threads and processes.</li>
<li>Any instance of a
  <a class="autorefs autorefs-internal" title="labtech.types.RunnerBackend" href="../runners/#labtech.types.RunnerBackend"><code>RunnerBackend</code></a>,
  allowing for custom task management implementations.</li>
</ul>
<p>For details on the differences between <code>'fork'</code> and
<code>'spawn'</code> backends, see <a href="https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods">the Python documentation on
<code>multiprocessing</code> start methods</a>.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>labtech/lab.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">299</span>
<span class="normal">300</span>
<span class="normal">301</span>
<span class="normal">302</span>
<span class="normal">303</span>
<span class="normal">304</span>
<span class="normal">305</span>
<span class="normal">306</span>
<span class="normal">307</span>
<span class="normal">308</span>
<span class="normal">309</span>
<span class="normal">310</span>
<span class="normal">311</span>
<span class="normal">312</span>
<span class="normal">313</span>
<span class="normal">314</span>
<span class="normal">315</span>
<span class="normal">316</span>
<span class="normal">317</span>
<span class="normal">318</span>
<span class="normal">319</span>
<span class="normal">320</span>
<span class="normal">321</span>
<span class="normal">322</span>
<span class="normal">323</span>
<span class="normal">324</span>
<span class="normal">325</span>
<span class="normal">326</span>
<span class="normal">327</span>
<span class="normal">328</span>
<span class="normal">329</span>
<span class="normal">330</span>
<span class="normal">331</span>
<span class="normal">332</span>
<span class="normal">333</span>
<span class="normal">334</span>
<span class="normal">335</span>
<span class="normal">336</span>
<span class="normal">337</span>
<span class="normal">338</span>
<span class="normal">339</span>
<span class="normal">340</span>
<span class="normal">341</span>
<span class="normal">342</span>
<span class="normal">343</span>
<span class="normal">344</span>
<span class="normal">345</span>
<span class="normal">346</span>
<span class="normal">347</span>
<span class="normal">348</span>
<span class="normal">349</span>
<span class="normal">350</span>
<span class="normal">351</span>
<span class="normal">352</span>
<span class="normal">353</span>
<span class="normal">354</span>
<span class="normal">355</span>
<span class="normal">356</span>
<span class="normal">357</span>
<span class="normal">358</span>
<span class="normal">359</span>
<span class="normal">360</span>
<span class="normal">361</span>
<span class="normal">362</span>
<span class="normal">363</span>
<span class="normal">364</span>
<span class="normal">365</span>
<span class="normal">366</span>
<span class="normal">367</span>
<span class="normal">368</span>
<span class="normal">369</span>
<span class="normal">370</span>
<span class="normal">371</span>
<span class="normal">372</span>
<span class="normal">373</span>
<span class="normal">374</span>
<span class="normal">375</span>
<span class="normal">376</span>
<span class="normal">377</span>
<span class="normal">378</span>
<span class="normal">379</span>
<span class="normal">380</span>
<span class="normal">381</span>
<span class="normal">382</span>
<span class="normal">383</span>
<span class="normal">384</span>
<span class="normal">385</span>
<span class="normal">386</span>
<span class="normal">387</span>
<span class="normal">388</span>
<span class="normal">389</span>
<span class="normal">390</span>
<span class="normal">391</span>
<span class="normal">392</span>
<span class="normal">393</span>
<span class="normal">394</span>
<span class="normal">395</span>
<span class="normal">396</span>
<span class="normal">397</span>
<span class="normal">398</span>
<span class="normal">399</span>
<span class="normal">400</span>
<span class="normal">401</span>
<span class="normal">402</span>
<span class="normal">403</span>
<span class="normal">404</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="p">,</span>
             <span class="n">storage</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Path</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Storage</span><span class="p">],</span>
             <span class="n">continue_on_failure</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
             <span class="n">max_workers</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">notebook</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LabContext</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
             <span class="n">runner_backend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span> <span class="o">|</span> <span class="n">RunnerBackend</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Args:</span>
<span class="sd">        storage: Where task results should be cached to. A string or</span>
<span class="sd">            [`Path`](https://docs.python.org/3/library/pathlib.html#pathlib.Path)</span>
<span class="sd">            will be interpreted as the path to a local directory, `None`</span>
<span class="sd">            will result in no caching. Any [Storage][labtech.types.Storage]</span>
<span class="sd">            instance may also be specified.</span>
<span class="sd">        continue_on_failure: If `True`, exceptions raised by tasks will be</span>
<span class="sd">            logged, but execution of other tasks will continue.</span>
<span class="sd">        max_workers: The maximum number of parallel worker processes for</span>
<span class="sd">            running tasks. A sensible default will be determined by the</span>
<span class="sd">            runner_backend (`&#39;fork&#39;` and `&#39;spawn&#39;` use the number of</span>
<span class="sd">            processors on the machine given by `os.cpu_count()`, while</span>
<span class="sd">            `&#39;thread&#39;` uses `os.cpu_count() + 4`).</span>
<span class="sd">        notebook: Determines whether to use notebook-friendly graphical</span>
<span class="sd">            progress bars. When set to `None` (the default), labtech will</span>
<span class="sd">            detect whether the code is being run from an IPython notebook.</span>
<span class="sd">        context: A dictionary of additional variables to make available to</span>
<span class="sd">            tasks. The context will not be cached, so the values should not</span>
<span class="sd">            affect results (e.g. parallelism factors) or should be kept</span>
<span class="sd">            constant between runs (e.g. datasets).</span>
<span class="sd">        runner_backend: Controls how tasks are run in parallel. It can</span>
<span class="sd">            optionally be set to one of the following options:</span>

<span class="sd">            * `&#39;fork&#39;`: Uses the</span>
<span class="sd">              [`ForkRunnerBackend`][labtech.runners.ForkRunnerBackend]</span>
<span class="sd">              to run each task in a forked subprocess. Memory use</span>
<span class="sd">              is reduced by sharing the context and dependency task</span>
<span class="sd">              results between tasks with memory inherited from the</span>
<span class="sd">              parent process. The default on platforms that support</span>
<span class="sd">              forked Python subprocesses when `max_workers &gt; 1`: Linux</span>
<span class="sd">              and other POSIX systems, but not macOS or Windows.</span>
<span class="sd">            * `&#39;spawn&#39;`: Uses the</span>
<span class="sd">              [`SpawnRunnerBackend`][labtech.runners.SpawnRunnerBackend]</span>
<span class="sd">              to run each task in a spawned subprocess. The</span>
<span class="sd">              context and dependency task results are</span>
<span class="sd">              copied/duplicated into the memory of each</span>
<span class="sd">              subprocess. The default on macOS and Windows when</span>
<span class="sd">              `max_workers &gt; 1`.</span>
<span class="sd">            * `&#39;thread&#39;`: Uses the</span>
<span class="sd">              [`ThreadRunnerBackend`][labtech.runners.ThreadRunnerBackend]</span>
<span class="sd">              to run each task in a separate Python thread. Because</span>
<span class="sd">              [Python threads do not execute in parallel](https://docs.python.org/3/glossary.html#term-global-interpreter-lock),</span>
<span class="sd">              this runner is best suited for running tasks that are</span>
<span class="sd">              constrained by non-blocking IO operations (e.g. web</span>
<span class="sd">              requests), or for running a single worker with live task</span>
<span class="sd">              monitoring. Memory use is reduced by sharing the same</span>
<span class="sd">              in-memory context and dependency task results across</span>
<span class="sd">              threads. The default when `max_workers = 1`.</span>
<span class="sd">            * `&#39;serial&#39;`: Uses the</span>
<span class="sd">              [`SerialRunnerBackend`][labtech.runners.SerialRunnerBackend]</span>
<span class="sd">              to run each task serially in the main process and thread.</span>
<span class="sd">              The task monitor will only be updated in between tasks. Mainly</span>
<span class="sd">              useful when troubleshooting issues running tasks on different</span>
<span class="sd">              threads and processes.</span>
<span class="sd">            * Any instance of a</span>
<span class="sd">              [`RunnerBackend`][labtech.types.RunnerBackend],</span>
<span class="sd">              allowing for custom task management implementations.</span>

<span class="sd">            For details on the differences between `&#39;fork&#39;` and</span>
<span class="sd">            `&#39;spawn&#39;` backends, see [the Python documentation on</span>
<span class="sd">            `multiprocessing` start methods](https://docs.python.org/3/library/multiprocessing.html#contexts-and-start-methods).</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">storage</span><span class="p">,</span> <span class="n">Path</span><span class="p">):</span>
        <span class="n">storage</span> <span class="o">=</span> <span class="n">LocalStorage</span><span class="p">(</span><span class="n">storage</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">storage</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">storage</span> <span class="o">=</span> <span class="n">NullStorage</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span> <span class="o">=</span> <span class="n">storage</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">continue_on_failure</span> <span class="o">=</span> <span class="n">continue_on_failure</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">max_workers</span> <span class="o">=</span> <span class="n">max_workers</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">notebook</span> <span class="o">=</span> <span class="n">is_ipython</span><span class="p">()</span> <span class="k">if</span> <span class="n">notebook</span> <span class="ow">is</span> <span class="kc">None</span> <span class="k">else</span> <span class="n">notebook</span>
    <span class="k">if</span> <span class="n">context</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">context</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">context</span> <span class="o">=</span> <span class="n">context</span>
    <span class="k">if</span> <span class="n">runner_backend</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">start_methods</span> <span class="o">=</span> <span class="n">get_all_start_methods</span><span class="p">()</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">max_workers</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">ThreadRunnerBackend</span><span class="p">()</span>
        <span class="k">elif</span> <span class="s1">&#39;fork&#39;</span> <span class="ow">in</span> <span class="n">start_methods</span><span class="p">:</span>
            <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">ForkRunnerBackend</span><span class="p">()</span>
        <span class="k">elif</span> <span class="s1">&#39;spawn&#39;</span> <span class="ow">in</span> <span class="n">start_methods</span><span class="p">:</span>
            <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">SpawnRunnerBackend</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LabError</span><span class="p">((</span><span class="s1">&#39;Default </span><span class="se">\&#39;</span><span class="s1">fork</span><span class="se">\&#39;</span><span class="s1"> and </span><span class="se">\&#39;</span><span class="s1">spawn</span><span class="se">\&#39;</span><span class="s1"> multiprocessing runner &#39;</span>
                            <span class="s1">&#39;backends are not supported on your system.&#39;</span>
                            <span class="s1">&#39;Please specify a system-compatible runner_backend.&#39;</span><span class="p">))</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">runner_backend</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">runner_backend</span> <span class="o">==</span> <span class="s1">&#39;fork&#39;</span><span class="p">:</span>
            <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">ForkRunnerBackend</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">runner_backend</span> <span class="o">==</span> <span class="s1">&#39;spawn&#39;</span><span class="p">:</span>
            <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">SpawnRunnerBackend</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">runner_backend</span> <span class="o">==</span> <span class="s1">&#39;serial&#39;</span><span class="p">:</span>
            <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">SerialRunnerBackend</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">runner_backend</span> <span class="o">==</span> <span class="s1">&#39;thread&#39;</span><span class="p">:</span>
            <span class="n">runner_backend</span> <span class="o">=</span> <span class="n">ThreadRunnerBackend</span><span class="p">()</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LabError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Unrecognised runner_backend: </span><span class="si">{</span><span class="n">runner_backend</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">runner_backend</span> <span class="o">=</span> <span class="n">runner_backend</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="labtech.Lab.run_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TaskT</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span> <span class="n">bust_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">disable_progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">disable_top</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span> <span class="n">top_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;$name $status since $start_time CPU: $cpu MEM: $rss&#39;</span><span class="p">,</span> <span class="n">top_sort</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;start_time&#39;</span><span class="p">,</span> <span class="n">top_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">TaskT</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Run the given tasks with as much process parallelism as possible.
Loads task results from the cache storage where possible and
caches results of executed tasks.</p>
<p>Any attribute of a task that is itself a task object is
considered a "nested task", and will be executed or loaded so
that it's result is made available to its parent task. If the
same task is nested inside multiple task objects, it will only
be executed/loaded once.</p>
<p>As well as returning the results, each task's result will be
assigned to a <code>result</code> attribute on the task itself.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>tasks</code></b>
              (<code><span title="typing.Sequence">Sequence</span>[<span title="labtech.types.TaskT">TaskT</span>]</code>)
          –
          <div class="doc-md-description">
            <p>The tasks to execute. Each should be an instance of a class
decorated with <a class="autorefs autorefs-internal" title="labtech.task(*args, code_version: Optional[str] = None, cache: Union[CacheDefault, None, Cache] = CACHE_DEFAULT, max_parallel: Optional[int] = None, mlflow_run: bool = False)" href="#labtech.task"><code>labtech.task</code></a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>bust_cache</code></b>
              (<code><span title="bool">bool</span></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>True</code>, no task results will be loaded from the
cache storage; all tasks will be re-executed.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>disable_progress</code></b>
              (<code><span title="bool">bool</span></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>True</code>, do not display a tqdm progress bar
tracking task execution.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>disable_top</code></b>
              (<code><span title="bool">bool</span></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If <code>True</code>, do not display the list of top active tasks.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>top_format</code></b>
              (<code><span title="str">str</span></code>, default:
                  <code>&#39;$name $status since $start_time CPU: $cpu MEM: $rss&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Format for each top active task. Follows the format
rules for
<a href="https://docs.python.org/3/library/string.html#template-strings">template strings</a>
and may include any of the following attributes for
substitution:</p>
<ul>
<li><code>name</code>: The task's name displayed in logs.</li>
<li><code>pid</code>: The task's primary process id.</li>
<li><code>status</code>: Whether the task is being run or loaded from cache.</li>
<li><code>start_time</code>: The time the task's primary process started.</li>
<li><code>children</code>: The number of child tasks of the task's primary
  process.</li>
<li><code>threads</code>: The number of active CPU threads for the task
  (including across any child processes).</li>
<li><code>cpu</code>: The CPU percentage (1 core = 100%) being used by the
  task (including across any child processes).</li>
<li><code>rss</code>: The resident set size (RSS) memory percentage being
  used by the task (including across any child processes). RSS
  is the primary measure of memory usage.</li>
<li><code>vms</code>: The virtual memory size (VMS) percentage being used by
  the task (including across any child processes).</li>
</ul>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>top_sort</code></b>
              (<code><span title="str">str</span></code>, default:
                  <code>&#39;start_time&#39;</code>
)
          –
          <div class="doc-md-description">
            <p>Sort order for the top active tasks. Can be any of the
attributes available for use in <code>top_format</code>. If the string is
preceded by a <code>-</code>, the sort order will be reversed. Defaults to
showing oldest tasks first.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>top_n</code></b>
              (<code><span title="int">int</span></code>, default:
                  <code>10</code>
)
          –
          <div class="doc-md-description">
            <p>The maximum number of top active tasks to display.</p>
          </div>
        </li>
    </ul>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><span title="dict">dict</span>[<span title="labtech.types.TaskT">TaskT</span>, <span title="typing.Any">Any</span>]</code>
          –
          <div class="doc-md-description">
            <p>A dictionary mapping each of the provided tasks to its
corresponding result.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>labtech/lab.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">406</span>
<span class="normal">407</span>
<span class="normal">408</span>
<span class="normal">409</span>
<span class="normal">410</span>
<span class="normal">411</span>
<span class="normal">412</span>
<span class="normal">413</span>
<span class="normal">414</span>
<span class="normal">415</span>
<span class="normal">416</span>
<span class="normal">417</span>
<span class="normal">418</span>
<span class="normal">419</span>
<span class="normal">420</span>
<span class="normal">421</span>
<span class="normal">422</span>
<span class="normal">423</span>
<span class="normal">424</span>
<span class="normal">425</span>
<span class="normal">426</span>
<span class="normal">427</span>
<span class="normal">428</span>
<span class="normal">429</span>
<span class="normal">430</span>
<span class="normal">431</span>
<span class="normal">432</span>
<span class="normal">433</span>
<span class="normal">434</span>
<span class="normal">435</span>
<span class="normal">436</span>
<span class="normal">437</span>
<span class="normal">438</span>
<span class="normal">439</span>
<span class="normal">440</span>
<span class="normal">441</span>
<span class="normal">442</span>
<span class="normal">443</span>
<span class="normal">444</span>
<span class="normal">445</span>
<span class="normal">446</span>
<span class="normal">447</span>
<span class="normal">448</span>
<span class="normal">449</span>
<span class="normal">450</span>
<span class="normal">451</span>
<span class="normal">452</span>
<span class="normal">453</span>
<span class="normal">454</span>
<span class="normal">455</span>
<span class="normal">456</span>
<span class="normal">457</span>
<span class="normal">458</span>
<span class="normal">459</span>
<span class="normal">460</span>
<span class="normal">461</span>
<span class="normal">462</span>
<span class="normal">463</span>
<span class="normal">464</span>
<span class="normal">465</span>
<span class="normal">466</span>
<span class="normal">467</span>
<span class="normal">468</span>
<span class="normal">469</span>
<span class="normal">470</span>
<span class="normal">471</span>
<span class="normal">472</span>
<span class="normal">473</span>
<span class="normal">474</span>
<span class="normal">475</span>
<span class="normal">476</span>
<span class="normal">477</span>
<span class="normal">478</span>
<span class="normal">479</span>
<span class="normal">480</span>
<span class="normal">481</span>
<span class="normal">482</span>
<span class="normal">483</span>
<span class="normal">484</span>
<span class="normal">485</span>
<span class="normal">486</span>
<span class="normal">487</span>
<span class="normal">488</span>
<span class="normal">489</span>
<span class="normal">490</span>
<span class="normal">491</span>
<span class="normal">492</span>
<span class="normal">493</span>
<span class="normal">494</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TaskT</span><span class="p">],</span> <span class="o">*</span><span class="p">,</span>
              <span class="n">bust_cache</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
              <span class="n">disable_progress</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
              <span class="n">disable_top</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
              <span class="n">top_format</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;$name $status since $start_time CPU: $cpu MEM: $rss&#39;</span><span class="p">,</span>
              <span class="n">top_sort</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s1">&#39;start_time&#39;</span><span class="p">,</span>
              <span class="n">top_n</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">10</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="n">TaskT</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run the given tasks with as much process parallelism as possible.</span>
<span class="sd">    Loads task results from the cache storage where possible and</span>
<span class="sd">    caches results of executed tasks.</span>

<span class="sd">    Any attribute of a task that is itself a task object is</span>
<span class="sd">    considered a &quot;nested task&quot;, and will be executed or loaded so</span>
<span class="sd">    that it&#39;s result is made available to its parent task. If the</span>
<span class="sd">    same task is nested inside multiple task objects, it will only</span>
<span class="sd">    be executed/loaded once.</span>

<span class="sd">    As well as returning the results, each task&#39;s result will be</span>
<span class="sd">    assigned to a `result` attribute on the task itself.</span>

<span class="sd">    Args:</span>
<span class="sd">        tasks: The tasks to execute. Each should be an instance of a class</span>
<span class="sd">            decorated with [`labtech.task`][labtech.task].</span>
<span class="sd">        bust_cache: If `True`, no task results will be loaded from the</span>
<span class="sd">            cache storage; all tasks will be re-executed.</span>
<span class="sd">        disable_progress: If `True`, do not display a tqdm progress bar</span>
<span class="sd">            tracking task execution.</span>
<span class="sd">        disable_top: If `True`, do not display the list of top active tasks.</span>
<span class="sd">        top_format: Format for each top active task. Follows the format</span>
<span class="sd">            rules for</span>
<span class="sd">            [template strings](https://docs.python.org/3/library/string.html#template-strings)</span>
<span class="sd">            and may include any of the following attributes for</span>
<span class="sd">            substitution:</span>

<span class="sd">            * `name`: The task&#39;s name displayed in logs.</span>
<span class="sd">            * `pid`: The task&#39;s primary process id.</span>
<span class="sd">            * `status`: Whether the task is being run or loaded from cache.</span>
<span class="sd">            * `start_time`: The time the task&#39;s primary process started.</span>
<span class="sd">            * `children`: The number of child tasks of the task&#39;s primary</span>
<span class="sd">              process.</span>
<span class="sd">            * `threads`: The number of active CPU threads for the task</span>
<span class="sd">              (including across any child processes).</span>
<span class="sd">            * `cpu`: The CPU percentage (1 core = 100%) being used by the</span>
<span class="sd">              task (including across any child processes).</span>
<span class="sd">            * `rss`: The resident set size (RSS) memory percentage being</span>
<span class="sd">              used by the task (including across any child processes). RSS</span>
<span class="sd">              is the primary measure of memory usage.</span>
<span class="sd">            * `vms`: The virtual memory size (VMS) percentage being used by</span>
<span class="sd">              the task (including across any child processes).</span>
<span class="sd">        top_sort: Sort order for the top active tasks. Can be any of the</span>
<span class="sd">            attributes available for use in `top_format`. If the string is</span>
<span class="sd">            preceded by a `-`, the sort order will be reversed. Defaults to</span>
<span class="sd">            showing oldest tasks first.</span>
<span class="sd">        top_n: The maximum number of top active tasks to display.</span>

<span class="sd">    Returns:</span>
<span class="sd">        A dictionary mapping each of the provided tasks to its</span>
<span class="sd">            corresponding result.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">task</span><span class="o">.</span><span class="n">code_version</span> <span class="o">!=</span> <span class="n">task</span><span class="o">.</span><span class="n">current_code_version</span><span class="p">:</span>
            <span class="k">raise</span> <span class="n">LabError</span><span class="p">(</span>
                <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;`</span><span class="si">{</span><span class="nb">repr</span><span class="p">(</span><span class="n">task</span><span class="p">)</span><span class="si">}</span><span class="s1">` cannot be run, as it has code_version=</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">code_version</span><span class="si">!r}</span><span class="s1"> &#39;</span>
                 <span class="sa">f</span><span class="s1">&#39;while the current implementation of </span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> has &#39;</span>
                 <span class="sa">f</span><span class="s1">&#39;code_version=</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="n">current_code_version</span><span class="si">!r}</span><span class="s1">. You should construct new &#39;</span>
                 <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">task</span><span class="o">.</span><span class="vm">__class__</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s1"> tasks to run instead of running tasks loaded from cache.&#39;</span><span class="p">)</span>
            <span class="p">)</span>


    <span class="n">coordinator</span> <span class="o">=</span> <span class="n">TaskCoordinator</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">bust_cache</span><span class="o">=</span><span class="n">bust_cache</span><span class="p">,</span>
        <span class="n">disable_progress</span><span class="o">=</span><span class="n">disable_progress</span><span class="p">,</span>
        <span class="n">disable_top</span><span class="o">=</span><span class="n">disable_top</span><span class="p">,</span>
        <span class="n">top_format</span><span class="o">=</span><span class="n">top_format</span><span class="p">,</span>
        <span class="n">top_sort</span><span class="o">=</span><span class="n">top_sort</span><span class="p">,</span>
        <span class="n">top_n</span><span class="o">=</span><span class="n">top_n</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">coordinator</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>

    <span class="n">failed_tasks</span> <span class="o">=</span> <span class="p">{</span><span class="n">task</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span> <span class="k">if</span> <span class="n">task</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">results</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">failed_tasks</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">LabError</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Failed to complete </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">failed_tasks</span><span class="p">)</span><span class="si">}</span><span class="s1"> submitted task(s)&#39;</span><span class="p">)</span>

    <span class="c1"># Return results in the same order as tasks</span>
    <span class="k">return</span> <span class="p">{</span><span class="n">task</span><span class="p">:</span> <span class="n">results</span><span class="p">[</span><span class="n">task</span><span class="p">]</span> <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="labtech.Lab.run_task" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run_task</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">[</span><span class="n">ResultT</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResultT</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Run a single task and return its result. Supports the same keyword
arguments as <code>run_tasks</code>.</p>
<p>NOTE: If you have many tasks to run, you should use
<code>run_tasks</code> instead to parallelise their execution.</p>


<p><span class="doc-section-title">Returns:</span></p>
    <ul>
        <li class="doc-section-item field-body">
              <code><a class="autorefs autorefs-internal" title="labtech.types.ResultT = TypeVar('ResultT')

  
      module-attribute
   (labtech.types.ResultT)" href="#labtech.types.ResultT">ResultT</a></code>
          –
          <div class="doc-md-description">
            <p>The result of the given task.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>labtech/lab.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">496</span>
<span class="normal">497</span>
<span class="normal">498</span>
<span class="normal">499</span>
<span class="normal">500</span>
<span class="normal">501</span>
<span class="normal">502</span>
<span class="normal">503</span>
<span class="normal">504</span>
<span class="normal">505</span>
<span class="normal">506</span>
<span class="normal">507</span>
<span class="normal">508</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run_task</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">[</span><span class="n">ResultT</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">ResultT</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Run a single task and return its result. Supports the same keyword</span>
<span class="sd">    arguments as `run_tasks`.</span>

<span class="sd">    NOTE: If you have many tasks to run, you should use</span>
<span class="sd">    `run_tasks` instead to parallelise their execution.</span>

<span class="sd">    Returns:</span>
<span class="sd">        The result of the given task.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">results</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">run_tasks</span><span class="p">([</span><span class="n">task</span><span class="p">],</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span><span class="p">[</span><span class="n">task</span><span class="p">]</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="labtech.Lab.cached_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cached_tasks</span><span class="p">(</span><span class="n">task_types</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">TaskT</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TaskT</span><span class="p">]</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Returns all task instances present in the Lab's cache storage for
the given <code>task_types</code>, each of which should be a task class
decorated with <a class="autorefs autorefs-internal" title="labtech.task(*args, code_version: Optional[str] = None, cache: Union[CacheDefault, None, Cache] = CACHE_DEFAULT, max_parallel: Optional[int] = None, mlflow_run: bool = False)" href="#labtech.task"><code>labtech.task</code></a>.</p>
<p>Does not load task results from the cache storage, but they
can be loaded by calling
<a class="autorefs autorefs-internal" title="run_tasks(tasks: Sequence[TaskT], *, bust_cache: bool = False, disable_progress: bool = False, disable_top: bool = False, top_format: str = '$name $status since $start_time CPU: $cpu MEM: $rss', top_sort: str = 'start_time', top_n: int = 10) -> dict[TaskT, Any]" href="#labtech.Lab.run_tasks"><code>run_tasks()</code></a> with the returned task
instances.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/lab.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">510</span>
<span class="normal">511</span>
<span class="normal">512</span>
<span class="normal">513</span>
<span class="normal">514</span>
<span class="normal">515</span>
<span class="normal">516</span>
<span class="normal">517</span>
<span class="normal">518</span>
<span class="normal">519</span>
<span class="normal">520</span>
<span class="normal">521</span>
<span class="normal">522</span>
<span class="normal">523</span>
<span class="normal">524</span>
<span class="normal">525</span>
<span class="normal">526</span>
<span class="normal">527</span>
<span class="normal">528</span>
<span class="normal">529</span>
<span class="normal">530</span>
<span class="normal">531</span>
<span class="normal">532</span>
<span class="normal">533</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">cached_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task_types</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Type</span><span class="p">[</span><span class="n">TaskT</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">TaskT</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns all task instances present in the Lab&#39;s cache storage for</span>
<span class="sd">    the given `task_types`, each of which should be a task class</span>
<span class="sd">    decorated with [`labtech.task`][labtech.task].</span>

<span class="sd">    Does not load task results from the cache storage, but they</span>
<span class="sd">    can be loaded by calling</span>
<span class="sd">    [`run_tasks()`][labtech.Lab.run_tasks] with the returned task</span>
<span class="sd">    instances.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">check_task_types</span><span class="p">(</span><span class="n">task_types</span><span class="p">)</span>
    <span class="n">keys</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="o">.</span><span class="n">find_keys</span><span class="p">()</span>
    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">task_type</span> <span class="ow">in</span> <span class="n">task_types</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">task</span> <span class="o">=</span> <span class="n">task_type</span><span class="o">.</span><span class="n">_lt</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">load_task</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">,</span> <span class="n">task_type</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>
            <span class="k">except</span> <span class="n">TaskNotFound</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">tasks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">task</span><span class="p">)</span>
                <span class="k">break</span>
    <span class="k">return</span> <span class="n">tasks</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="labtech.Lab.is_cached" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">is_cached</span><span class="p">(</span><span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Checks if a result is present for given task in the Lab's cache
storage.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/lab.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">535</span>
<span class="normal">536</span>
<span class="normal">537</span>
<span class="normal">538</span>
<span class="normal">539</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_cached</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">task</span><span class="p">:</span> <span class="n">Task</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Checks if a result is present for given task in the Lab&#39;s cache</span>
<span class="sd">    storage.&quot;&quot;&quot;</span>
    <span class="n">check_tasks</span><span class="p">([</span><span class="n">task</span><span class="p">])</span>
    <span class="k">return</span> <span class="n">task</span><span class="o">.</span><span class="n">_lt</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">is_cached</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="labtech.Lab.uncache_tasks" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">uncache_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Task</span><span class="p">])</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Removes cached results for the given tasks from the Lab's cache
storage.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/lab.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">541</span>
<span class="normal">542</span>
<span class="normal">543</span>
<span class="normal">544</span>
<span class="normal">545</span>
<span class="normal">546</span>
<span class="normal">547</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">uncache_tasks</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tasks</span><span class="p">:</span> <span class="n">Sequence</span><span class="p">[</span><span class="n">Task</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes cached results for the given tasks from the Lab&#39;s cache</span>
<span class="sd">    storage.&quot;&quot;&quot;</span>
    <span class="n">check_tasks</span><span class="p">(</span><span class="n">tasks</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">tasks</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">is_cached</span><span class="p">(</span><span class="n">task</span><span class="p">):</span>
            <span class="n">task</span><span class="o">.</span><span class="n">_lt</span><span class="o">.</span><span class="n">cache</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_storage</span><span class="p">,</span> <span class="n">task</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="labtech.task" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">labtech</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="n">code_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">cache</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">CacheDefault</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Cache</span><span class="p">]</span> <span class="o">=</span> <span class="n">CACHE_DEFAULT</span><span class="p">,</span> <span class="n">max_parallel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span> <span class="n">mlflow_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents first">

        <p>Class decorator for defining task type classes.</p>
<p>Task types are frozen [<code>dataclasses</code>], and attribute definitions
should capture all parameters of the task type. Parameter
attributes can be any of the following types:</p>
<ul>
<li>Simple scalar types: <code>str</code>, <code>bool</code>, <code>float</code>, <code>int</code>, <code>None</code></li>
<li>Any member of an <code>Enum</code> type. Referring to members of an <code>Enum</code> can be
  used to parameterise a task with a value that does not have one of the
  types above (e.g. a Pandas/Numpy dataset).</li>
<li>Task types: A task parameter is a "nested task" that will be executed
  before its parent so that it may make use of the nested result.</li>
<li>Collections of any of these types: <code>list</code>, <code>tuple</code>,
  <code>dict</code>, <a href="https://pypi.org/project/frozendict/"><code>frozendict</code></a></li>
<li>Dictionaries may only contain string keys.</li>
<li>Note: Mutable <code>list</code> and <code>dict</code> collections will be converted to
    immutable <code>tuple</code> and <a href="https://pypi.org/project/frozendict/"><code>frozendict</code></a>
    collections.</li>
</ul>
<p>The task type is expected to define a <code>run()</code> method that takes no
arguments (other than <code>self</code>). The <code>run()</code> method should execute
the task as parameterised by the task's attributes and return the
result of the task.</p>
<p>Example usage:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@labtech</span><span class="o">.</span><span class="n">task</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Experiment</span><span class="p">:</span>
    <span class="n">seed</span><span class="p">:</span> <span class="nb">int</span>
    <span class="n">multiplier</span><span class="p">:</span> <span class="nb">int</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">seed</span> <span class="o">*</span> <span class="bp">self</span><span class="o">.</span><span class="n">multiplier</span><span class="o">.</span><span class="n">value</span>

<span class="n">experiment</span> <span class="o">=</span> <span class="n">Experiment</span><span class="p">(</span><span class="n">seed</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">multiplier</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
</code></pre></div>
<p>You can also provide arguments to the decorator to control
caching, cache-busting versioning, parallelism, and
<a href="https://mlflow.org/docs/latest/tracking.html#quickstart">mlflow</a>
tracking:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@labtech</span><span class="o">.</span><span class="n">task</span><span class="p">(</span><span class="n">cache</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">code_version</span><span class="o">=</span><span class="s1">&#39;v1&#39;</span><span class="p">,</span> <span class="n">max_parallel</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">mlflow_run</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Experiment</span><span class="p">:</span>
    <span class="o">...</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="o">...</span>
</code></pre></div>
<p>If a <code>post_init(self)</code> method is defined, it will be called after
the task object is initialised (analagously to the <code>__post_init__</code>
method of a dataclass). Because task types are frozen dataclasses,
attributes can only be assigned to the task with
<code>object.__setattr__(self, attribute_name, attribute_value)</code>.</p>
<p>If a <code>filter_context(self, context: LabContext) -&gt; LabContext</code>
method is defined, it will be called to transform the context
provided to each task. This can be useful for selecting subsets of
large contexts in order to reduce data transferred to non-forked
subprocesses or other kinds of processes in parallel processing
frameworks. The filtering may take into account the values of the
task's attributes. If <code>filter_context()</code> is not defined, the full
context will be provided to each task.</p>
<p>A <code>runner_options(self) -&gt; dict[str, Any]</code> method may be defined
to provide a dictionary of options to further control the
behaviour of specific types of runner backend - refer to the
documentation of each runner backend for supported options. The
implementation may make use of the task's parameter values.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <ul>
        <li class="doc-section-item field-body">
            <b><code>cache</code></b>
              (<code><span title="typing.Union">Union</span>[<span title="labtech.tasks.CacheDefault">CacheDefault</span>, None, <span title="labtech.types.Cache">Cache</span>]</code>, default:
                  <code><span title="labtech.tasks.CACHE_DEFAULT">CACHE_DEFAULT</span></code>
)
          –
          <div class="doc-md-description">
            <p>The Cache that controls how task results are formatted for
caching. Can be set to an instance of any
<a href="../caching/#caches"><code>Cache</code></a> class, or <code>None</code> to disable caching
of this type of task. Defaults to a
<a class="autorefs autorefs-internal" title="labtech.cache.PickleCache" href="../caching/#labtech.cache.PickleCache"><code>PickleCache</code></a>.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>code_version</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="str">str</span>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>Optional identifier for the version of task's
implementation. Task results will only be loaded from the
cache where they have a matching code_version, so you
should change the code_version whenever the definition of
the task's <code>run</code> method or any code it depends on changes
in a way that will impact the result. Any string value can
be used, e.g. 'v1', '2025-04-22', etc.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>max_parallel</code></b>
              (<code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>, default:
                  <code>None</code>
)
          –
          <div class="doc-md-description">
            <p>The maximum number of instances of this task type that
are allowed to run simultaneously in separate sub-processes. Useful
to set if running too many instances of this particular task
simultaneously will exhaust system memory or processing resources.</p>
          </div>
        </li>
        <li class="doc-section-item field-body">
            <b><code>mlflow_run</code></b>
              (<code><span title="bool">bool</span></code>, default:
                  <code>False</code>
)
          –
          <div class="doc-md-description">
            <p>If True, the execution of each instance of this task type
will be wrapped with <code>mlflow.start_run()</code>, tags the run with
<code>labtech_task_type</code> equal to the task class name, and all parameters
will be logged with <code>mlflow.log_param()</code>. You can make additional
mlflow logging calls from the task's <code>run()</code> method.</p>
          </div>
        </li>
    </ul>


            <details class="quote">
              <summary>Source code in <code>labtech/tasks.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span>
<span class="normal">220</span>
<span class="normal">221</span>
<span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span>
<span class="normal">273</span>
<span class="normal">274</span>
<span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">task</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span>
         <span class="n">code_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
         <span class="n">cache</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">CacheDefault</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">Cache</span><span class="p">]</span> <span class="o">=</span> <span class="n">CACHE_DEFAULT</span><span class="p">,</span>
         <span class="n">max_parallel</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
         <span class="n">mlflow_run</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Class decorator for defining task type classes.</span>

<span class="sd">    Task types are frozen [`dataclasses`], and attribute definitions</span>
<span class="sd">    should capture all parameters of the task type. Parameter</span>
<span class="sd">    attributes can be any of the following types:</span>

<span class="sd">    * Simple scalar types: `str`, `bool`, `float`, `int`, `None`</span>
<span class="sd">    * Any member of an `Enum` type. Referring to members of an `Enum` can be</span>
<span class="sd">      used to parameterise a task with a value that does not have one of the</span>
<span class="sd">      types above (e.g. a Pandas/Numpy dataset).</span>
<span class="sd">    * Task types: A task parameter is a &quot;nested task&quot; that will be executed</span>
<span class="sd">      before its parent so that it may make use of the nested result.</span>
<span class="sd">    * Collections of any of these types: `list`, `tuple`,</span>
<span class="sd">      `dict`, [`frozendict`](https://pypi.org/project/frozendict/)</span>
<span class="sd">      * Dictionaries may only contain string keys.</span>
<span class="sd">      * Note: Mutable `list` and `dict` collections will be converted to</span>
<span class="sd">        immutable `tuple` and [`frozendict`](https://pypi.org/project/frozendict/)</span>
<span class="sd">        collections.</span>

<span class="sd">    The task type is expected to define a `run()` method that takes no</span>
<span class="sd">    arguments (other than `self`). The `run()` method should execute</span>
<span class="sd">    the task as parameterised by the task&#39;s attributes and return the</span>
<span class="sd">    result of the task.</span>

<span class="sd">    Example usage:</span>

<span class="sd">    ```python</span>
<span class="sd">    @labtech.task</span>
<span class="sd">    class Experiment:</span>
<span class="sd">        seed: int</span>
<span class="sd">        multiplier: int</span>

<span class="sd">        def run(self):</span>
<span class="sd">            return self.seed * self.multiplier.value</span>

<span class="sd">    experiment = Experiment(seed=1, multiplier=2)</span>
<span class="sd">    ```</span>

<span class="sd">    You can also provide arguments to the decorator to control</span>
<span class="sd">    caching, cache-busting versioning, parallelism, and</span>
<span class="sd">    [mlflow](https://mlflow.org/docs/latest/tracking.html#quickstart)</span>
<span class="sd">    tracking:</span>

<span class="sd">    ```python</span>
<span class="sd">    @labtech.task(cache=None, code_version=&#39;v1&#39;, max_parallel=1, mlflow_run=True)</span>
<span class="sd">    class Experiment:</span>
<span class="sd">        ...</span>

<span class="sd">        def run(self):</span>
<span class="sd">            ...</span>
<span class="sd">    ```</span>

<span class="sd">    If a `post_init(self)` method is defined, it will be called after</span>
<span class="sd">    the task object is initialised (analagously to the `__post_init__`</span>
<span class="sd">    method of a dataclass). Because task types are frozen dataclasses,</span>
<span class="sd">    attributes can only be assigned to the task with</span>
<span class="sd">    `object.__setattr__(self, attribute_name, attribute_value)`.</span>

<span class="sd">    If a `filter_context(self, context: LabContext) -&gt; LabContext`</span>
<span class="sd">    method is defined, it will be called to transform the context</span>
<span class="sd">    provided to each task. This can be useful for selecting subsets of</span>
<span class="sd">    large contexts in order to reduce data transferred to non-forked</span>
<span class="sd">    subprocesses or other kinds of processes in parallel processing</span>
<span class="sd">    frameworks. The filtering may take into account the values of the</span>
<span class="sd">    task&#39;s attributes. If `filter_context()` is not defined, the full</span>
<span class="sd">    context will be provided to each task.</span>

<span class="sd">    A `runner_options(self) -&gt; dict[str, Any]` method may be defined</span>
<span class="sd">    to provide a dictionary of options to further control the</span>
<span class="sd">    behaviour of specific types of runner backend - refer to the</span>
<span class="sd">    documentation of each runner backend for supported options. The</span>
<span class="sd">    implementation may make use of the task&#39;s parameter values.</span>

<span class="sd">    Args:</span>
<span class="sd">        cache: The Cache that controls how task results are formatted for</span>
<span class="sd">            caching. Can be set to an instance of any</span>
<span class="sd">            [`Cache`](caching.md#caches) class, or `None` to disable caching</span>
<span class="sd">            of this type of task. Defaults to a</span>
<span class="sd">            [`PickleCache`][labtech.cache.PickleCache].</span>
<span class="sd">        code_version: Optional identifier for the version of task&#39;s</span>
<span class="sd">            implementation. Task results will only be loaded from the</span>
<span class="sd">            cache where they have a matching code_version, so you</span>
<span class="sd">            should change the code_version whenever the definition of</span>
<span class="sd">            the task&#39;s `run` method or any code it depends on changes</span>
<span class="sd">            in a way that will impact the result. Any string value can</span>
<span class="sd">            be used, e.g. &#39;v1&#39;, &#39;2025-04-22&#39;, etc.</span>
<span class="sd">        max_parallel: The maximum number of instances of this task type that</span>
<span class="sd">            are allowed to run simultaneously in separate sub-processes. Useful</span>
<span class="sd">            to set if running too many instances of this particular task</span>
<span class="sd">            simultaneously will exhaust system memory or processing resources.</span>
<span class="sd">        mlflow_run: If True, the execution of each instance of this task type</span>
<span class="sd">            will be wrapped with `mlflow.start_run()`, tags the run with</span>
<span class="sd">            `labtech_task_type` equal to the task class name, and all parameters</span>
<span class="sd">            will be logged with `mlflow.log_param()`. You can make additional</span>
<span class="sd">            mlflow logging calls from the task&#39;s `run()` method.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">decorator</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
        <span class="k">nonlocal</span> <span class="n">cache</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">is_task_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">reserved_attr</span> <span class="ow">in</span> <span class="n">_RESERVED_ATTRS</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="n">reserved_attr</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">AttributeError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task type already defines reserved attribute &#39;</span><span class="si">{</span><span class="n">reserved_attr</span><span class="si">}</span><span class="s2">&#39;.&quot;</span><span class="p">)</span>

        <span class="n">post_init</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">&#39;post_init&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__post_init__</span> <span class="o">=</span> <span class="n">_task_post_init</span>

        <span class="bp">cls</span> <span class="o">=</span> <span class="n">dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">eq</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">order</span><span class="o">=</span><span class="kc">True</span><span class="p">)(</span><span class="bp">cls</span><span class="p">)</span>

        <span class="n">run_func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">&#39;run&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">callable</span><span class="p">(</span><span class="n">run_func</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Task type &#39;</span><span class="si">{</span><span class="bp">cls</span><span class="o">.</span><span class="vm">__name__</span><span class="si">}</span><span class="s2">&#39; must define a &#39;run&#39; method&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">cache</span> <span class="ow">is</span> <span class="n">CACHE_DEFAULT</span><span class="p">:</span>
            <span class="n">cache</span> <span class="o">=</span> <span class="n">PickleCache</span><span class="p">()</span>
        <span class="k">elif</span> <span class="n">cache</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">cache</span> <span class="o">=</span> <span class="n">NullCache</span><span class="p">()</span>

        <span class="bp">cls</span><span class="o">.</span><span class="n">_lt</span> <span class="o">=</span> <span class="n">TaskInfo</span><span class="p">(</span>
            <span class="n">cache</span><span class="o">=</span><span class="n">cast</span><span class="p">(</span><span class="n">Cache</span><span class="p">,</span> <span class="n">cache</span><span class="p">),</span>
            <span class="n">orig_post_init</span><span class="o">=</span><span class="n">post_init</span><span class="p">,</span>
            <span class="n">max_parallel</span><span class="o">=</span><span class="n">max_parallel</span><span class="p">,</span>
            <span class="n">mlflow_run</span><span class="o">=</span><span class="n">mlflow_run</span><span class="p">,</span>
            <span class="n">current_code_version</span><span class="o">=</span><span class="n">code_version</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__getstate__</span> <span class="o">=</span> <span class="n">_task__getstate__</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">__setstate__</span> <span class="o">=</span> <span class="n">_task__setstate__</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_set_results_map</span> <span class="o">=</span> <span class="n">_task_set_results_map</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_set_result_meta</span> <span class="o">=</span> <span class="n">_task_set_result_meta</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">_set_code_version</span> <span class="o">=</span> <span class="n">_task_set_code_version</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">current_code_version</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_task_current_code_version</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">cache_key</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_task_cache_key</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">result</span> <span class="o">=</span> <span class="nb">property</span><span class="p">(</span><span class="n">_task_result</span><span class="p">)</span>
        <span class="bp">cls</span><span class="o">.</span><span class="n">set_context</span> <span class="o">=</span> <span class="n">_task_set_context</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">&#39;filter_context&#39;</span><span class="p">):</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">filter_context</span> <span class="o">=</span> <span class="n">_task_filter_context_default</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">&#39;runner_options&#39;</span><span class="p">):</span>
            <span class="bp">cls</span><span class="o">.</span><span class="n">runner_options</span> <span class="o">=</span> <span class="n">_task_runner_options_default</span>
        <span class="k">return</span> <span class="bp">cls</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">args</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">isclass</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]):</span>
        <span class="k">return</span> <span class="n">decorator</span><span class="p">(</span><span class="n">args</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="o">*</span><span class="n">args</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">decorator</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div><p>Any task type decorated with <a class="autorefs autorefs-internal" title="labtech.task(*args, code_version: Optional[str] = None, cache: Union[CacheDefault, None, Cache] = CACHE_DEFAULT, max_parallel: Optional[int] = None, mlflow_run: bool = False)" href="#labtech.task"><code>labtech.task</code></a> will
provide the following attributes and methods:</p>


<div class="doc doc-object doc-class">



<h2 id="labtech.types.Task" class="doc doc-heading">
            <code>labtech.types.Task</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">
            <p class="doc doc-class-bases">
              Bases: <code><span title="typing.Protocol">Protocol</span></code>, <code><span title="typing.Generic">Generic</span>[<span title="labtech.types.CovariantResultT">CovariantResultT</span>]</code></p>


        <p>Interface provided by any class that is decorated by
<a class="autorefs autorefs-internal" title="labtech.task(*args, code_version: Optional[str] = None, cache: Union[CacheDefault, None, Cache] = CACHE_DEFAULT, max_parallel: Optional[int] = None, mlflow_run: bool = False)" href="#labtech.task"><code>labtech.task</code></a>.</p>







              <details class="quote">
                <summary>Source code in <code>labtech/types.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 66</span>
<span class="normal"> 67</span>
<span class="normal"> 68</span>
<span class="normal"> 69</span>
<span class="normal"> 70</span>
<span class="normal"> 71</span>
<span class="normal"> 72</span>
<span class="normal"> 73</span>
<span class="normal"> 74</span>
<span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span>
<span class="k">class</span><span class="w"> </span><span class="nc">Task</span><span class="p">(</span><span class="n">Protocol</span><span class="p">,</span> <span class="n">Generic</span><span class="p">[</span><span class="n">CovariantResultT</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface provided by any class that is decorated by</span>
<span class="sd">    [`labtech.task`][labtech.task].&quot;&quot;&quot;</span>
    <span class="n">_lt</span><span class="p">:</span> <span class="n">TaskInfo</span>
    <span class="n">_is_task</span><span class="p">:</span> <span class="n">Literal</span><span class="p">[</span><span class="kc">True</span><span class="p">]</span>
    <span class="n">_results_map</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ResultsMap</span><span class="p">]</span>
    <span class="n">_cache_key</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LabContext</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Context variables from the Lab that can be accessed when the task is running.&quot;&quot;&quot;</span>
    <span class="n">result_meta</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ResultMeta</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Metadata about the execution of the task.&quot;&quot;&quot;</span>
    <span class="n">code_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Identifier for the version of task&#39;s implementation. If this task was</span>
<span class="sd">    loaded from cache, it may have a different value to that currently specified</span>
<span class="sd">    in the decorator.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_results_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">results_map</span><span class="p">:</span> <span class="n">ResultsMap</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">_set_result_meta</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">result_meta</span><span class="p">:</span> <span class="n">ResultMeta</span><span class="p">):</span>
        <span class="k">pass</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">current_code_version</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Identifier for the current version of task&#39;s implementation</span>
<span class="sd">        as specified in the [`labtech.task`][labtech.task] decorator.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">cache_key</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The key that uniquely identifies the location for this task</span>
<span class="sd">        within cache storage.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">result</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">CovariantResultT</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;The result executed/loaded for this task. If no result is</span>
<span class="sd">        available in memory, accessing this property raises a `TaskError`.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">set_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">LabContext</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Set the context that is made available to the task while it is</span>
<span class="sd">        running.&quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">runner_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User-overridable method to a dictionary of options to</span>
<span class="sd">        further control the behaviour of specific types of runner</span>
<span class="sd">        backend - refer to the documentation of each runner backend</span>
<span class="sd">        for supported options. The implementation may make use of the</span>
<span class="sd">        task&#39;s parameter values.</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">filter_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">LabContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LabContext</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User-overridable method to filter/transform the context to</span>
<span class="sd">        be provided to the task. The default implementation provides</span>
<span class="sd">        the full context to the task. The filtering may take into</span>
<span class="sd">        account the values of the task&#39;s attributes.</span>

<span class="sd">        This can be useful for selecting subsets of large contexts in</span>
<span class="sd">        order to reduce data transferred to non-forked subprocesses or</span>
<span class="sd">        other kinds of processes in parallel processing frameworks.</span>

<span class="sd">        &quot;&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;User-provided method that executes the task parameterised by the</span>
<span class="sd">        attributes of the task.</span>

<span class="sd">        Usually executed by [`Lab.run_tasks()`][labtech.Lab.run_tasks]</span>
<span class="sd">        instead of being called directly.</span>

<span class="sd">        &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="labtech.types.Task.context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">context</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">LabContext</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Context variables from the Lab that can be accessed when the task is running.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="labtech.types.Task.result_meta" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">result_meta</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ResultMeta</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Metadata about the execution of the task.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="labtech.types.Task.code_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">code_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Identifier for the version of task's implementation. If this task was
loaded from cache, it may have a different value to that currently specified
in the decorator.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="labtech.types.Task.current_code_version" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">current_code_version</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>Identifier for the current version of task's implementation
as specified in the <a class="autorefs autorefs-internal" title="labtech.task(*args, code_version: Optional[str] = None, cache: Union[CacheDefault, None, Cache] = CACHE_DEFAULT, max_parallel: Optional[int] = None, mlflow_run: bool = False)" href="#labtech.task"><code>labtech.task</code></a> decorator.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="labtech.types.Task.cache_key" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">cache_key</span><span class="p">:</span> <span class="nb">str</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The key that uniquely identifies the location for this task
within cache storage.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="labtech.types.Task.result" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">result</span><span class="p">:</span> <span class="n">CovariantResultT</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-property"><code>property</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The result executed/loaded for this task. If no result is
available in memory, accessing this property raises a <code>TaskError</code>.</p>

    </div>

</div>



<div class="doc doc-object doc-function">


<h3 id="labtech.types.Task.set_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">set_context</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">LabContext</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Set the context that is made available to the task while it is
running.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">set_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">LabContext</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Set the context that is made available to the task while it is</span>
<span class="sd">    running.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="labtech.types.Task.runner_options" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">runner_options</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>User-overridable method to a dictionary of options to
further control the behaviour of specific types of runner
backend - refer to the documentation of each runner backend
for supported options. The implementation may make use of the
task's parameter values.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">runner_options</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;User-overridable method to a dictionary of options to</span>
<span class="sd">    further control the behaviour of specific types of runner</span>
<span class="sd">    backend - refer to the documentation of each runner backend</span>
<span class="sd">    for supported options. The implementation may make use of the</span>
<span class="sd">    task&#39;s parameter values.</span>

<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="labtech.types.Task.filter_context" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">filter_context</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">LabContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LabContext</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>User-overridable method to filter/transform the context to
be provided to the task. The default implementation provides
the full context to the task. The filtering may take into
account the values of the task's attributes.</p>
<p>This can be useful for selecting subsets of large contexts in
order to reduce data transferred to non-forked subprocesses or
other kinds of processes in parallel processing frameworks.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">filter_context</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">context</span><span class="p">:</span> <span class="n">LabContext</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">LabContext</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;User-overridable method to filter/transform the context to</span>
<span class="sd">    be provided to the task. The default implementation provides</span>
<span class="sd">    the full context to the task. The filtering may take into</span>
<span class="sd">    account the values of the task&#39;s attributes.</span>

<span class="sd">    This can be useful for selecting subsets of large contexts in</span>
<span class="sd">    order to reduce data transferred to non-forked subprocesses or</span>
<span class="sd">    other kinds of processes in parallel processing frameworks.</span>

<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h3 id="labtech.types.Task.run" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">run</span><span class="p">()</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>User-provided method that executes the task parameterised by the
attributes of the task.</p>
<p>Usually executed by <a class="autorefs autorefs-internal" title="run_tasks(tasks: Sequence[TaskT], *, bust_cache: bool = False, disable_progress: bool = False, disable_top: bool = False, top_format: str = '$name $status since $start_time CPU: $cpu MEM: $rss', top_sort: str = 'start_time', top_n: int = 10) -> dict[TaskT, Any]" href="#labtech.Lab.run_tasks"><code>Lab.run_tasks()</code></a>
instead of being called directly.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;User-provided method that executes the task parameterised by the</span>
<span class="sd">    attributes of the task.</span>

<span class="sd">    Usually executed by [`Lab.run_tasks()`][labtech.Lab.run_tasks]</span>
<span class="sd">    instead of being called directly.</span>

<span class="sd">    &quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="labtech.types.ResultT" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">labtech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">ResultT</span> <span class="o">=</span> <span class="n">TypeVar</span><span class="p">(</span><span class="s1">&#39;ResultT&#39;</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">

        <p>Type variable for result returned by the <code>run</code> method of a
<a class="autorefs autorefs-internal" title="labtech.types.Task


  
      dataclass
  " href="#labtech.types.Task"><code>Task</code></a>.</p>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="labtech.types.ResultMeta" class="doc doc-heading">
            <code>labtech.types.ResultMeta</code>


  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-dataclass"><code>dataclass</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">


        <p>Metadata about the execution of a task. If the task is loaded from
cache, the metadata is also loaded from the cache.</p>







              <details class="quote">
                <summary>Source code in <code>labtech/types.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="nd">@dataclass</span><span class="p">(</span><span class="n">frozen</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">class</span><span class="w"> </span><span class="nc">ResultMeta</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Metadata about the execution of a task. If the task is loaded from</span>
<span class="sd">    cache, the metadata is also loaded from the cache.&quot;&quot;&quot;</span>
    <span class="n">start</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The timestamp when the task&#39;s execution began.&quot;&quot;&quot;</span>
    <span class="n">duration</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">timedelta</span><span class="p">]</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The time that the task took to execute.&quot;&quot;&quot;</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">







<div class="doc doc-object doc-attribute">



<h3 id="labtech.types.ResultMeta.start" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">start</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">datetime</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The timestamp when the task's execution began.</p>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h3 id="labtech.types.ResultMeta.duration" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">duration</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">timedelta</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-instance-attribute"><code>instance-attribute</code></small>
  </span>

</h3>


    <div class="doc doc-contents ">

        <p>The time that the task took to execute.</p>

    </div>

</div>





  </div>

    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="labtech.types.LabContext" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">labtech</span><span class="o">.</span><span class="n">types</span><span class="o">.</span><span class="n">LabContext</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">

    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="labtech.is_task_type" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">labtech</span><span class="o">.</span><span class="n">is_task_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents first">

        <p>Returns <code>True</code> if the given <code>cls</code> is a class decorated with
<a class="autorefs autorefs-internal" title="labtech.task(*args, code_version: Optional[str] = None, cache: Union[CacheDefault, None, Cache] = CACHE_DEFAULT, max_parallel: Optional[int] = None, mlflow_run: bool = False)" href="#labtech.task"><code>labtech.task</code></a>.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_task_type</span><span class="p">(</span><span class="bp">cls</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns `True` if the given `cls` is a class decorated with</span>
<span class="sd">    [`labtech.task`][labtech.task].&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">isclass</span><span class="p">(</span><span class="bp">cls</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">isinstance</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">cls</span><span class="p">,</span> <span class="s1">&#39;_lt&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">),</span> <span class="n">TaskInfo</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="labtech.is_task" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">labtech</span><span class="o">.</span><span class="n">is_task</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents first">

        <p>Returns <code>True</code> if the given <code>obj</code> is an instance of a task class.</p>


            <details class="quote">
              <summary>Source code in <code>labtech/types.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">is_task</span><span class="p">(</span><span class="n">obj</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns `True` if the given `obj` is an instance of a task class.&quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">is_task_type</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">obj</span><span class="p">))</span> <span class="ow">and</span> <span class="nb">hasattr</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s1">&#39;_is_task&#39;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-attribute">



<h2 id="labtech.logger" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">labtech</span><span class="o">.</span><span class="n">logger</span> <span class="o">=</span> <span class="n">get_logger</span><span class="p">()</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-module-attribute"><code>module-attribute</code></small>
  </span>

</h2>


    <div class="doc doc-contents first">

        <p><code>logging.Logger</code> object that labtech logs events to during task execution.</p>
<p>Can be used to customize logging and to write additional logs from
task <code>run()</code> methods:</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">logging</span>
<span class="kn">from</span><span class="w"> </span><span class="nn">labtech</span><span class="w"> </span><span class="kn">import</span> <span class="n">logger</span>

<span class="c1"># Change verbosity of logging</span>
<span class="n">logger</span><span class="o">.</span><span class="n">setLevel</span><span class="p">(</span><span class="n">logging</span><span class="o">.</span><span class="n">ERROR</span><span class="p">)</span>

<span class="c1"># Logging methods to call from inside your task&#39;s run() method:</span>
<span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s1">&#39;Useful info from task: ...&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s1">&#39;Warning from task: ...&#39;</span><span class="p">)</span>
<span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s1">&#39;Error from task: ...&#39;</span><span class="p">)</span>
</code></pre></div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tracking", "navigation.sections"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>